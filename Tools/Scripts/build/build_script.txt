@echo off
echo Building Jammin' Eats executable...
echo.

rem Set the path to Python executable
set PYTHON_PATH="C:\Program Files\Python\Python313\python.exe"
set PIP_PATH="C:\Program Files\Python\Python313\Scripts\pip.exe"

rem Check if PyInstaller is installed
%PYTHON_PATH% -m pip show pyinstaller > nul 2>&1
if %errorlevel% neq 0 (
    echo PyInstaller not found. Installing PyInstaller...
    %PYTHON_PATH% -m pip install pyinstaller
    if %errorlevel% neq 0 (
        echo Failed to install PyInstaller.
        goto :error
    )
)

rem Create dummy icon if it doesn't exist
if not exist assets\icon.ico (
    echo Creating placeholder icon...
    mkdir assets 2>nul
    echo This is a placeholder for an icon file. > assets\icon.ico
)

rem Build the executable using the spec file
%PYTHON_PATH% -m PyInstaller --clean jammin_eats.spec
if %errorlevel% neq 0 (
    echo Build failed.
    goto :error
)

echo.
echo Build completed successfully!
echo The executable can be found in the 'dist' folder.
echo.
goto :end

:error
echo.
echo There was an error in the build process.
echo.

:end
pause
